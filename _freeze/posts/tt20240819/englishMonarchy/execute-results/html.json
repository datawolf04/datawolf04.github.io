{
  "hash": "8d49cefca2ca97332325038e6559e6fd",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"English Monarchy\"\ndescription: \"\"\nauthor: \"Steven Wolf\"\ndate: \"8/20/2024\"\ncategories:\n  - tidyTuesday\n  - R \nresources: \n  - \"englishMonarchy.RData\"\n  - \"englishDynasties.csv\"\nexecute: \n  messages: false\n  warning: false\ndraft:\n  true\n---\n\n\n\nThis week's #TidyTuesday is all about  exploring English Monarchs and Marriages!\n\n> this dataset focuses on the names, ages, and marriages of various 'kings' and 'consorts'. the data ranges all the way back to 850 where the details are a bit fuzzy, spanning all the way to current day. names contain special characters; ages & years can be a bit of a regex puzzle as well. additionally, the age of kings and consorts may show quite a bit of an age gap.\n\nThe data was scraped from [Ian Visits](https://www.ianvisits.co.uk/articles/a-list-of-monarchs-by-marriage-6857/) by [f. hull](https://github.com/frankiethull), who also curated this week's post!\n\n\n\n::: {.cell}\n\n:::\n\n\n\n### Additions/changes to the dataset\nI will note a few things which I can highlight by looking at the end of the dataset:\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 5\n  king_name    king_age consort_name                consort_age year_of_marriage\n  <chr>        <chr>    <chr>                       <chr>       <chr>           \n1 Victoria     21       Albert of Saxe-Coburg and … 21          1840            \n2 Edward VII   22       Alexandra of Denmark        19          1863            \n3 George V     28       Mary of Teck                26          1893            \n4 Edward VIII  43       Wallis Warfield Simpson     41          1937            \n5 George VI    28       Elizabeth Bowes-Lyon        23          1923            \n6 Elizabeth II 21       Philip of Greece and Denma… 26          1947            \n```\n\n\n:::\n:::\n\n\n1. King Charles III is not in this dataset. I will add him into the dataset. I'll also include his consort as Camilla, rather than Diana, as Diana was not married to Charles during his reign.\n2. The dataset refers to the **king** rather than a gender neutral term. I will replace it with **sovereign**. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(monarchDat) = str_replace_all(names(monarchDat),\"king\",\"sovereign\")\ncharles = data.frame('Charles III','57','Camilla Parker Bowles','xx','2005')\nnames(charles) = names(monarchDat)\nmonarchDat = rbind(monarchDat,charles)\n```\n:::\n\n\n\nI have retained the term consort as I don't have a better one. I'm shuddering a bit though because we have a 5 and a 3 year old in this dataset:\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 5\n  sovereign_name       sovereign_age consort_name   consort_age year_of_marriage\n  <chr>                <chr>         <chr>          <chr>       <chr>           \n1 Henry the Young King 5             Margaret of F… 3           1160            \n```\n\n\n:::\n:::\n\n\n\nFinally, I also collected data of the different dynasties of English royalty taken from [Wikipedia](https://en.wikipedia.org/wiki/List_of_English_monarchs) and [Britannica](https://kids.britannica.com/students/article/kings-and-queens-of-Britain-at-a-glance/626780). That data is the the file [`englishDynasties.csv`](./englishDynasties.csv).\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n## Data cleaning\nAs one might expect from a dataset that has been scraped from a webpage written by a London history/culture type, there is some inconsistency in how the data has been cataloged. And as the prompt for the week says, some of the early data is \"fuzzy\". So I want to clean it up.\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 84\nColumns: 5\n$ sovereign_name   <chr> \"Æthelwulf\", \"Æthelwulf\", \"Æthelbald\", \"Æthelberht\", …\n$ sovereign_age    <chr> \"?\", \"50(?)\", \"24\", \"–\", \"?\", \"19\", \"19\", \"28\", \"31\",…\n$ consort_name     <chr> \"Osburh\", \"Judith of Flanders\", \"Judith of Flanders\",…\n$ consort_age      <chr> \"?\", \"12\", \"14\", \"–\", \"?\", \"16\", \"?\", \"?\", \"?\", \"–\", …\n$ year_of_marriage <chr> \"851(?)\", \"856\", \"858\", \"–\", \"?\", \"868\", \"893\", \"902\"…\n```\n\n\n:::\n:::\n\n\n\nAs you can see from the glimpse above, uncertainty in the dataset is often indicated with `?` or `-` being included in the string. Ultimately I want to work with numeric variables, so I'm going to need to clean them up. I also want to track whether a date or age is uncertain, so I am going to create columns tracking that information.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 84\nColumns: 14\n$ sovereign_name       <chr> \"Æthelwulf\", \"Æthelwulf\", \"Æthelbald\", \"Æthelberh…\n$ sovereign_age        <dbl> NA, 50, 24, NA, NA, 19, 19, 28, 31, NA, NA, 22, N…\n$ consort_name         <chr> \"Osburh\", \"Judith of Flanders\", \"Judith of Flande…\n$ consort_age          <dbl> NA, 12, 14, NA, NA, 16, NA, NA, NA, NA, NA, NA, N…\n$ year_of_marriage     <dbl> 851, 856, 858, NA, NA, 868, 893, 902, 905, NA, NA…\n$ sovereign_age_unc    <lgl> TRUE, TRUE, FALSE, FALSE, TRUE, FALSE, FALSE, FAL…\n$ consort_age_unc      <lgl> TRUE, FALSE, FALSE, FALSE, TRUE, FALSE, TRUE, TRU…\n$ year_of_marriage_unc <lgl> TRUE, FALSE, FALSE, FALSE, TRUE, FALSE, FALSE, FA…\n$ any_unc              <lgl> TRUE, TRUE, FALSE, FALSE, TRUE, FALSE, TRUE, TRUE…\n$ sovereign_type       <fct> King, King, King, King, King, King, King, King, K…\n$ age_diff_pos         <lgl> NA, TRUE, TRUE, NA, NA, TRUE, NA, NA, NA, NA, NA,…\n$ age_diff             <dbl> NA, 38, 10, NA, NA, 3, NA, NA, NA, NA, NA, NA, NA…\n$ min_age              <dbl> NA, 12, 14, NA, NA, 16, NA, NA, NA, NA, NA, NA, N…\n$ max_age              <dbl> NA, 50, 24, NA, NA, 19, NA, NA, NA, NA, NA, NA, N…\n```\n\n\n:::\n:::\n\n\n\n## Plan\nMake a plot with sovereign age and consort age given the year of marriage. On this plot I'm going to highlight:\n\n1. The age gap. If both sovereign and consort have the age recorded in the data, there will be a vertical line drawn from the younger to the elder.\n2. The gender of the sovereign. Kings are light blue and queens are pink.\n3. Marriages with uncertain data (either in the year or the ages of those involved) are more transparent so that they stand out less.\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](englishMonarchy_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n## One more visualization\nPairs plots are fun, and the `ggpairs` function will automatically calculate some correlation values and put them on the plot as well. I've always done these using old school `pairs` and I thought it would be fun to look at one using the `ggplot` version. One big advantage is how it automatically uses the `facet_grid` framework to make the plots and include special plots along the diagonal. You could do the same thing with `pairs`, but it was more work.\n\nThere are so few Sovereigns who were queens that the density plots on the age at the marriage is. So the spikes in the density plots really just reflect the low queen count and the wide range of queen ages when they are married relative to that count. \n\nAlso, even though the sovereign queens were the monarch, they also were (in general) younger than their consort, while to opposite is true for the kings.\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](englishMonarchy_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "englishMonarchy_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}